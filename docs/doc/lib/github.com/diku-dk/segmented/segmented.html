<!DOCTYPE HTML>
<html lang="en"><head><meta charset="utf-8"><title>lib/github.com/diku-dk/segmented/segmented</title><link href="../../../../../style.css" rel="stylesheet" type="text/css"></head><body><div id="header"><h1>lib/github.com/diku-dk/segmented/segmented</h1><ul id="navigation"><li><a href="../../../../../index.html">Contents</a></li><li><a href="../../../../../doc-index.html">Index</a></li></ul></div><div id="content"><nav id="filenav"><ul><li><a href="../../../../../doc/lib/github.com/vmchale/img-fut/img.html">lib/github.com/vmchale/img-fut/img</a></li></ul></nav><main><a id="abstract" href="#abstract" class="self_link"><h2>Abstract</h2></a><p>Irregular segmented operations, like scans and reductions.</p>
<a id="synopsis" href="#synopsis" class="self_link"><h2>Synopsis</h2></a><div id="overview"><div id="module"><table class="specs"><tr><td></td><td></td><td></td></tr><tr><td class="spec_lhs"><span class="keyword">val </span><span class="decl_name"><span id="5058s"><a href="#5058">segmented_scan</a></span></span></td><td class="spec_eql"> [<span id="5034">n</span>] &#39;<span id="5035">t</span> : </td><td class="spec_rhs">(<span id="5036">op</span>: t -&gt; t -&gt; t) -&gt; (<span id="5037">ne</span>: t) -&gt; (<span id="5038">flags</span>: [n]bool) -&gt; (<span id="5039">as</span>: [n]t) -&gt; [n]t</td></tr><tr><td class="spec_lhs"><span class="keyword">val </span><span class="decl_name"><span id="5108s"><a href="#5108">segmented_reduce</a></span></span></td><td class="spec_eql"> [<span id="5059">n</span>] &#39;<span id="5060">t</span> : </td><td class="spec_rhs">(<span id="5061">op</span>: t -&gt; t -&gt; t) -&gt; (<span id="5062">ne</span>: t) -&gt; (<span id="5063">flags</span>: [n]bool) -&gt; (<span id="5064">as</span>: [n]t) -&gt; *[]t</td></tr><tr><td class="spec_lhs"><span class="keyword">val </span><span class="decl_name"><span id="5154s"><a href="#5154">replicated_iota</a></span></span></td><td class="spec_eql"> [<span id="5109">n</span>] : </td><td class="spec_rhs">(<span id="5110">reps</span>: [n]i32) -&gt; []i32</td></tr><tr><td class="spec_lhs"><span class="keyword">val </span><span class="decl_name"><span id="5171s"><a href="#5171">segmented_iota</a></span></span></td><td class="spec_eql"> [<span id="5155">n</span>] : </td><td class="spec_rhs">(<span id="5156">flags</span>: [n]bool) -&gt; [n]i32</td></tr><tr><td class="spec_lhs"><span class="keyword">val </span><span class="decl_name"><span id="5207s"><a href="#5207">expand</a></span></span></td><td class="spec_eql"> &#39;<span id="5172">a</span> &#39;<span id="5173">b</span> [<span id="5176">impl₀</span>] : </td><td class="spec_rhs">(<span id="5174">sz</span>: a -&gt; i32) -&gt; (<span id="5175">get</span>: a -&gt; i32 -&gt; b) -&gt; (<span id="5177">arr</span>: [impl₀]a) -&gt; []b</td></tr><tr><td class="spec_lhs"><span class="keyword">val </span><span class="decl_name"><span id="5250s"><a href="#5250">expand_reduce</a></span></span></td><td class="spec_eql"> &#39;<span id="5208">a</span> &#39;<span id="5209">b</span> [<span id="5214">impl₀</span>] : </td><td class="spec_rhs">(<span id="5210">sz</span>: a -&gt; i32) -&gt; (<span id="5211">get</span>: a -&gt; i32 -&gt; b) -&gt; (<span id="5212">op</span>: b -&gt; b -&gt; b) -&gt; (<span id="5213">ne</span>: b) -&gt; (<span id="5215">arr</span>: [impl₀]a) -&gt; []b</td></tr><tr><td class="spec_lhs"><span class="keyword">val </span><span class="decl_name"><span id="5278s"><a href="#5278">expand_outer_reduce</a></span></span></td><td class="spec_eql"> &#39;<span id="5251">a</span> &#39;<span id="5252">b</span> [<span id="5253">n</span>] : </td><td class="spec_rhs">(<span id="5254">sz</span>: a -&gt; i32) -&gt; (<span id="5255">get</span>: a -&gt; i32 -&gt; b) -&gt; (<span id="5256">op</span>: b -&gt; b -&gt; b) -&gt; (<span id="5257">ne</span>: b) -&gt; (<span id="5258">arr</span>: [n]a) -&gt; [n]b</td></tr></table></div></div><a id="description" href="#description" class="self_link"><h2>Description</h2></a><dl><div class="decl_description"><dt class="desc_header"><a class="synopsis_link" href="#5058s">↑</a><span class="keyword">val </span><span class="decl_name"><span class="decl_name"><a id="5058">segmented_scan</a></span></span> [<span id="5034">n</span>] &#39;<span id="5035">t</span>: (<span id="5036">op</span>: t -&gt; t -&gt; t) -&gt; (<span id="5037">ne</span>: t) -&gt; (<span id="5038">flags</span>: [n]bool) -&gt; (<span id="5039">as</span>: [n]t) -&gt; [n]t</dt><dd class="desc_doc"><p>Segmented scan. Given a binary associative operator <code>op</code> with
neutral element <code>ne</code>, computes the inclusive prefix scan of the
segments of <code>as</code> specified by the <code>flags</code> array, where <code>true</code>
starts a segment and <code>false</code> continues a segment.</p>
</dd></div><div class="decl_description"><dt class="desc_header"><a class="synopsis_link" href="#5108s">↑</a><span class="keyword">val </span><span class="decl_name"><span class="decl_name"><a id="5108">segmented_reduce</a></span></span> [<span id="5059">n</span>] &#39;<span id="5060">t</span>: (<span id="5061">op</span>: t -&gt; t -&gt; t) -&gt; (<span id="5062">ne</span>: t) -&gt; (<span id="5063">flags</span>: [n]bool) -&gt; (<span id="5064">as</span>: [n]t) -&gt; *[]t</dt><dd class="desc_doc"><p>Segmented reduction. Given a binary associative operator <code>op</code>
with neutral element <code>ne</code>, computes the reduction of the segments
of <code>as</code> specified by the <code>flags</code> array, where <code>true</code> starts a
segment and <code>false</code> continues a segment.  One value is returned per
segment.</p>
</dd></div><div class="decl_description"><dt class="desc_header"><a class="synopsis_link" href="#5154s">↑</a><span class="keyword">val </span><span class="decl_name"><span class="decl_name"><a id="5154">replicated_iota</a></span></span> [<span id="5109">n</span>]: (<span id="5110">reps</span>: [n]i32) -&gt; []i32</dt><dd class="desc_doc"><p>Replicated iota. Given a repetition array, the function returns
an array with each index (starting from 0) repeated according to
the repetition array. As an example, replicated_iota [2,3,1]
returns the array [0,0,1,1,1,2].</p>
</dd></div><div class="decl_description"><dt class="desc_header"><a class="synopsis_link" href="#5171s">↑</a><span class="keyword">val </span><span class="decl_name"><span class="decl_name"><a id="5171">segmented_iota</a></span></span> [<span id="5155">n</span>]: (<span id="5156">flags</span>: [n]bool) -&gt; [n]i32</dt><dd class="desc_doc"><p>Segmented iota. Given a flags array, the function returns an
array of index sequences, each of which is reset according to the
flags array. As an examples, segmented_iota
[false,false,false,true,false,false,false] returns the array
[0,1,2,0,1,2,3].</p>
</dd></div><div class="decl_description"><dt class="desc_header"><a class="synopsis_link" href="#5207s">↑</a><span class="keyword">val </span><span class="decl_name"><span class="decl_name"><a id="5207">expand</a></span></span> &#39;<span id="5172">a</span> &#39;<span id="5173">b</span> [<span id="5176">impl₀</span>]: (<span id="5174">sz</span>: a -&gt; i32) -&gt; (<span id="5175">get</span>: a -&gt; i32 -&gt; b) -&gt; (<span id="5177">arr</span>: [impl₀]a) -&gt; []b</dt><dd class="desc_doc"><p>Generic expansion function. The function expands a source array
into a target array given (1) a function that determines, for each
source element, how many target elements it expands to and (2) a
function that computes a particular target element based on a
source element and the target element number associated with the
source. As an example, the expression expand (\x-&gt;x) (*) [2,3,1]
returns the array [0,2,0,3,6,0].</p>
</dd></div><div class="decl_description"><dt class="desc_header"><a class="synopsis_link" href="#5250s">↑</a><span class="keyword">val </span><span class="decl_name"><span class="decl_name"><a id="5250">expand_reduce</a></span></span> &#39;<span id="5208">a</span> &#39;<span id="5209">b</span> [<span id="5214">impl₀</span>]: (<span id="5210">sz</span>: a -&gt; i32) -&gt; (<span id="5211">get</span>: a -&gt; i32 -&gt; b) -&gt; (<span id="5212">op</span>: b -&gt; b -&gt; b) -&gt; (<span id="5213">ne</span>: b) -&gt; (<span id="5215">arr</span>: [impl₀]a) -&gt; []b</dt><dd class="desc_doc"><p>Expansion function equivalent to performing a segmented reduction
to the result of a general expansion with a flags vector expressing
the beginning of the expanded segments. The function makes use of
the intermediate flags vector generated as part of the expansion
and the <code>expand_reduce</code> function is therefore more efficient than
if a segmented reduction (with an appropriate flags vector) is
explicitly followed by a call to expand.</p>
</dd></div><div class="decl_description"><dt class="desc_header"><a class="synopsis_link" href="#5278s">↑</a><span class="keyword">val </span><span class="decl_name"><span class="decl_name"><a id="5278">expand_outer_reduce</a></span></span> &#39;<span id="5251">a</span> &#39;<span id="5252">b</span> [<span id="5253">n</span>]: (<span id="5254">sz</span>: a -&gt; i32) -&gt; (<span id="5255">get</span>: a -&gt; i32 -&gt; b) -&gt; (<span id="5256">op</span>: b -&gt; b -&gt; b) -&gt; (<span id="5257">ne</span>: b) -&gt; (<span id="5258">arr</span>: [n]a) -&gt; [n]b</dt><dd class="desc_doc"><p>Expansion followed by an ''outer segmented reduce'' that ensures
that each element in the result array corresponds to expanding and
reducing the corresponding element in the source array.</p>
</dd></div></dl></main></div><div id="footer">Generated by <a href="https://futhark.readthedocs.io/en/latest/man/futhark-doc.html">futhark-doc</a> 0.17.2</div></body></html>